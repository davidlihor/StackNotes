services:
  backend:
    container_name: BACKEND
    build:
      context: .
      dockerfile: BACKEND/Dockerfile
    command: npm run start
    environment:
      - NODE_ENVIRONMENT=Development
      - DATABASE_URI=mongodb://root:<your-database-password>@mongodb:27017
      - ACCESS_TOKEN_SECRET=<your-access-token-secret>
      - REFRESH_TOKEN_SECRET=<your-refresh-token-secret>
      - CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
    ports:
      - 3500:3500
    volumes:
      - backendLogs:/app/logs
    depends_on:
      - mongodb
    networks:
      - public
      - private

  frontend:
    container_name: FRONTEND
    build:
      context: .
      dockerfile: FRONTEND/Dockerfile
    environment:
      - VITE_API_URL=http://localhost:3500
    ports:
      - 3000:80
    depends_on:
      - backend
    networks:
      - public
  
  mongodb:
    container_name: MongoDB
    image: mongo
    environment:
      - MONGO_INITDB_ROOT_USERNAME=root
      - MONGO_INITDB_ROOT_PASSWORD=<your-database-password>
    ports:
      - 27017:27017
    volumes:
      - mongodbData:/data/db
    networks:
      - private

networks:
  public:
  private:

volumes:
  backendLogs:
  mongodbData: